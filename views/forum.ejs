<% include ./partials/header %>
<% include ./partials/js-scripts/main %>


	<div class="container" style="margin-top: 2rem;">
		<h1 style="display: inline;">Forum</h1>
			<a href="/forum/new" class="btn btn-primary" style="float: right; text-transform: capitalize; text-decoration: none;">New Post</a>
	</div>

	<div class="container">
		<ul id="forumPostsList" class="list-group">
				<% var altListGroupItem = 0; %>
				<% var listGroupItem; %>
				<% msg.forEach(function(msg){ %> <!-- Start of content loop -->
					<% if((altListGroupItem % 2) == 0) { %>
						<% listGroupItem = 'list-group-item-info'; %>
					<% } else { %>
						<% listGroupItem = 'list-group-item-default'; %>
					<% }; %>

					<% altListGroupItem += 1; %>

  <li class="list-group-item justify-content-between <%= listGroupItem %>" id="forumPost-<%= altListGroupItem %>" onmouseover="makeActive(this)" onmouseout="makeInactive(this)" onclick="location.href='/forum/<%= msg._id %>';" style="cursor: pointer;">
      <div><span><h5><%= msg.title %></h5></span><span><%= msg.date.toDateString() %></span><div>
      <span class="panel-body">
					<% if(typeof msg.body != 'undefined') { %>
						<%= msg.body.substring(0,120) %>...
					<% } else { %>
						<%= "..." %>
					<% } %>
			</span>
		</li>

<% }); %> <!-- End of content loop -->
</ul>
</div>

<script type="text/javascript">

	function makeActive(listId) {
		console.log(listId.id + " = active")
		document.getElementById(listId.id).classList.add('active');
	}

	function makeInactive(listId) {
		console.log(listId.id + " = inactive")
		document.getElementById(listId.id).classList.remove('active');
	}

</script>
<% include ./partials/footer %>
